import{w as S}from"./index.9ef37c99.js";import{a1 as b}from"./index.94397499.js";const c={};function w(e){return e==="local"?localStorage:sessionStorage}function z(e,m,t){const n=(t==null?void 0:t.serializer)??JSON,l=(t==null?void 0:t.storage)??"local",o=typeof window<"u"&&typeof document<"u";function f(a,i){o&&w(l).setItem(a,n.stringify(i))}if(!c[e]){const a=S(m,r=>{const s=o?w(l).getItem(e):null;if(s&&r(n.parse(s)),o){const g=u=>{u.key===e&&r(u.newValue?n.parse(u.newValue):null)};return window.addEventListener("storage",g),()=>window.removeEventListener("storage",g)}}),{subscribe:i,set:d}=a;c[e]={set(r){f(e,r),d(r)},update(r){const s=r(b(a));f(e,s),d(s)},subscribe:i}}return c[e]}export{z as p};
