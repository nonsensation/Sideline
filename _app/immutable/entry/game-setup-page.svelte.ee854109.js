import{S as X,i as J,s as Q,k as w,q as A,a as T,l as E,m as V,r as R,h as N,c as P,n as i,H as O,b as U,D as m,N as z,O as B,u as re,E as W,P as ue,I as K,o as ce,Q as L,w as F,R as de,y as x,z as ee,A as te,g as se,d as ae,B as ne}from"../chunks/index.b0be7b9a.js";import{a as me,o as q}from"../chunks/obs-store.596a91fc.js";const C="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",v="[a-fA-F\\d]{1,4}",G=`
(?:
(?:${v}:){7}(?:${v}|:)|                                   
(?:${v}:){6}(?:${C}|:${v}|:)|                             
(?:${v}:){5}(?::${C}|(?::${v}){1,2}|:)|                   
(?:${v}:){4}(?:(?::${v}){0,1}:${C}|(?::${v}){1,3}|:)| 
(?:${v}:){3}(?:(?::${v}){0,2}:${C}|(?::${v}){1,4}|:)| 
(?:${v}:){2}(?:(?::${v}){0,3}:${C}|(?::${v}){1,5}|:)| 
(?:${v}:){1}(?:(?::${v}){0,4}:${C}|(?::${v}){1,6}|:)| 
(?::(?:(?::${v}){0,5}:${C}|(?::${v}){1,7}|:))            
)(?:%[0-9a-zA-Z]{1,})?|(::d)                                            
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim();var H={isIPAddress(t){return new RegExp(`(?:^${C}$)|(?:^${G}$)`).test(t.toString())},isIPV4Address(t){return new RegExp(`^${C}$`).test(t.toString())},isIPV6Address(t){return new RegExp(`^${G}$`).test(t.toString())},ipVersion(t){return new RegExp(`(?:^${C}$)|(?:^${G}$)`).test(t.toString())?new RegExp(`^${G}$`).test(t.toString())?6:4:"Please enter valid IP address"}};function pe(t){let e,s,n,o,u,p=t[4]?"Disconnect":"Connect",l,r,_,f,g,c,y,d,k,b,$,a,I,D;return{c(){e=w("fieldset"),s=w("legend"),n=A("OBS Settings"),o=T(),u=w("button"),l=A(p),r=T(),_=w("a"),f=A("?"),g=T(),c=w("input"),y=T(),d=w("input"),k=T(),b=w("input"),$=T(),a=w("textarea"),this.h()},l(S){e=E(S,"FIELDSET",{class:!0});var h=V(e);s=E(h,"LEGEND",{class:!0});var Y=V(s);n=R(Y,"OBS Settings"),Y.forEach(N),o=P(h),u=E(h,"BUTTON",{class:!0});var Z=V(u);l=R(Z,p),Z.forEach(N),r=P(h),_=E(h,"A",{class:!0,href:!0,rel:!0,target:!0,title:!0});var j=V(_);f=R(j,"?"),j.forEach(N),g=P(h),c=E(h,"INPUT",{type:!0,placeholder:!0,title:!0,class:!0}),y=P(h),d=E(h,"INPUT",{type:!0,placeholder:!0,title:!0,class:!0}),k=P(h),b=E(h,"INPUT",{type:!0,placeholder:!0,title:!0,class:!0}),$=P(h),a=E(h,"TEXTAREA",{class:!0,spellcheck:!0}),V(a).forEach(N),h.forEach(N),this.h()},h(){i(s,"class","svelte-1ek9td9"),i(u,"class","btn btn-connect svelte-1ek9td9"),O(u,"connected",t[4]),i(_,"class","help-ext svelte-1ek9td9"),i(_,"href",""),i(_,"rel","noreferrer"),i(_,"target","_blank"),i(_,"title","Go to the OBS-Documentation"),i(c,"type","text"),i(c,"placeholder","IP"),i(c,"title","Websocket Server IP (for OBS it is usually 192.168.X.X)"),i(c,"class","svelte-1ek9td9"),O(c,"invalid",!H.isIPAddress(t[1])),i(d,"type","text"),i(d,"placeholder","Port"),i(d,"title","Port (for OBS it is usually 4455)"),i(d,"class","svelte-1ek9td9"),O(d,"invalid",!M(t[0])),i(b,"type","password"),i(b,"placeholder","Password"),i(b,"title","If required by the OBS Websocket Server (can also be ampty)"),i(b,"class","svelte-1ek9td9"),i(a,"class","no-resize svelte-1ek9td9"),i(a,"spellcheck","false"),a.disabled=!0,i(e,"class","grid-item svelte-1ek9td9")},m(S,h){U(S,e,h),m(e,s),m(s,n),m(e,o),m(e,u),m(u,l),m(e,r),m(e,_),m(_,f),m(e,g),m(e,c),z(c,t[1]),m(e,y),m(e,d),z(d,t[0]),m(e,k),m(e,b),z(b,t[2]),m(e,$),m(e,a),t[10](a),I||(D=[B(u,"click",t[5]),B(c,"input",t[7]),B(d,"input",t[8]),B(b,"input",t[9])],I=!0)},p(S,[h]){h&16&&p!==(p=S[4]?"Disconnect":"Connect")&&re(l,p),h&16&&O(u,"connected",S[4]),h&2&&c.value!==S[1]&&z(c,S[1]),h&2&&O(c,"invalid",!H.isIPAddress(S[1])),h&1&&d.value!==S[0]&&z(d,S[0]),h&1&&O(d,"invalid",!M(S[0])),h&4&&b.value!==S[2]&&z(b,S[2])},i:W,o:W,d(S){S&&N(e),t[10](null),I=!1,ue(D)}}}function M(t){const e=Number(t);return!isNaN(e)&&e>0&&e<9999}function _e(t,e,s){let n,o;K(t,me,a=>s(11,n=a)),K(t,q,a=>s(4,o=a)),ce(()=>{s(1,p=localStorage.getItem("obs-ip")||""),s(0,u=localStorage.getItem("obs-port")||""),s(2,l=localStorage.getItem("obs-pw")||""),s(3,r.value=sessionStorage.getItem("obs-status")||"",r),o||c()});let u="",p="",l="",r;n.addListener("ConnectionClosed",a=>{L(q,o=!1,o),f(`ConnectionClosed ${a.code} , ${a.message}`)}),n.addListener("ConnectionError",a=>{L(q,o=!1,o),f(`ConnectionError ${a.code} , ${a.message}`)});async function _(){!o&&(!H.isIPAddress(p)||!M(u))||(await c(),o&&g())}function f(a){const I=new Date().toLocaleTimeString("de-de",{timeStyle:"medium"});s(3,r.value=`${I} | ${a}
`+r.value,r),sessionStorage.setItem("obs-status",r.value)}function g(){localStorage.setItem("obs-ip",p),localStorage.setItem("obs-port",u),localStorage.setItem("obs-pw",l)}async function c(){if(o)try{await n.disconnect(),L(q,o=!1,o),f("Disconnected.")}catch(a){f(`Failed to disconnect ${a.code} , ${a.message}`)}else try{let a=p.trim(),I=u.trim(),D=l;H.isIPV6Address(a)&&(a=`[${a}]`);const{obsWebSocketVersion:S,negotiatedRpcVersion:h}=await n.connect(`ws://${a}:${I}`,D,{rpcVersion:1});L(q,o=!0,o),f(`Connected to the OBS-WebSocket-Server (Version: ${S} RPC: ${h})`)}catch(a){L(q,o=!1,o),f(`Failed to connect ${a.code} , ${a.message}`)}}async function y(a,I){if(!o){f(`Cannot send data ${a} - not connected!`);return}var D=await n.call("CallVendorRequest",{vendorName:"obs-browser",requestType:"emit_event",requestData:{event_name:a,event_data:I}});return f(`Request: ${a}: ${JSON.stringify(I)}`),f(`Response: ${JSON.stringify(D)}`),D}function d(){p=this.value,s(1,p)}function k(){u=this.value,s(0,u)}function b(){l=this.value,s(2,l)}function $(a){F[a?"unshift":"push"](()=>{r=a,s(3,r)})}return[u,p,l,r,o,_,y,d,k,b,$]}class fe extends X{constructor(e){super(),J(this,e,_e,pe,Q,{obsSendData:6})}get obsSendData(){return this.$$.ctx[6]}}const le=[{name:"sideline_ws_time_min",displayName:"Minutes",description:"",category:"time",defaultValue:"0"},{name:"sideline_ws_time_sec",displayName:"Seconds",description:"",category:"time",defaultValue:"0"},{name:"sideline_ws_time_period",displayName:"Period",description:"",category:"time",defaultValue:"1"},{name:"sideline_ws_time_color",displayName:"Timer Color",description:"",category:"time",defaultValue:"white"},{name:"sideline_ws_score_color",displayName:"Score Color",description:"",category:"score",defaultValue:"white"},{name:"sideline_ws_team_name_home",displayName:"Team Name Home",description:"",category:"team-home",defaultValue:"HOME"},{name:"sideline_ws_team_name_guest",displayName:"Team Name Guest",description:"",category:"team-guest",defaultValue:"GUEST"},{name:"sideline_ws_team_score_home",displayName:"Team Score Home",description:"",category:"team-home",defaultValue:"0"},{name:"sideline_ws_team_score_guest",displayName:"Team Score Guest",description:"",category:"team-guest",defaultValue:"0"},{name:"sideline_ws_team_logo_home",displayName:"Team Logo Home",description:"",category:"team-home",defaultValue:""},{name:"sideline_ws_team_logo_guest",displayName:"Team Logo Guest",description:"",category:"team-guest",defaultValue:""},{name:"sideline_ws_team_textcolor_home",displayName:"Team Text Color Home",description:"",category:"team-home",defaultValue:"black"},{name:"sideline_ws_team_textcolor_guest",displayName:"Team Text Color Guest",description:"",category:"team-guest",defaultValue:"black"},{name:"sideline_ws_team_background_home",displayName:"Team Text Color Home",description:"",category:"team-home",defaultValue:"white"},{name:"sideline_ws_team_background_guest",displayName:"Team Text Color Guest",description:"",category:"team-guest",defaultValue:"white"}];function oe(t,e,s){const n=t.slice();return n[2]=e[s],n[3]=e,n[4]=s,n}function ie(t){let e,s,n,o=t[2].displayName+"",u,p,l,r,_,f,g,c,y,d;function k(){t[1].call(r,t[3],t[4])}return{c(){e=w("fieldset"),s=w("legend"),n=w("label"),u=A(o),l=T(),r=w("input"),c=T(),this.h()},l(b){e=E(b,"FIELDSET",{class:!0});var $=V(e);s=E($,"LEGEND",{class:!0});var a=V(s);n=E(a,"LABEL",{for:!0,class:!0});var I=V(n);u=R(I,o),I.forEach(N),a.forEach(N),l=P($),r=E($,"INPUT",{type:!0,name:!0,placeholder:!0,title:!0,class:!0}),c=P($),$.forEach(N),this.h()},h(){i(n,"for",p=t[2].name),i(n,"class","svelte-17qczez"),i(s,"class","svelte-17qczez"),i(r,"type","text"),i(r,"name",_=t[2].name),i(r,"placeholder",f=t[2].defaultValue),i(r,"title",g=t[2].description),i(r,"class","svelte-17qczez"),i(e,"class"," svelte-17qczez")},m(b,$){U(b,e,$),m(e,s),m(s,n),m(n,u),m(e,l),m(e,r),z(r,t[2].name),m(e,c),y||(d=B(r,"input",k),y=!0)},p(b,$){t=b,$&1&&o!==(o=t[2].displayName+"")&&re(u,o),$&1&&p!==(p=t[2].name)&&i(n,"for",p),$&1&&_!==(_=t[2].name)&&i(r,"name",_),$&1&&f!==(f=t[2].defaultValue)&&i(r,"placeholder",f),$&1&&g!==(g=t[2].description)&&i(r,"title",g),$&1&&r.value!==t[2].name&&z(r,t[2].name)},d(b){b&&N(e),y=!1,d()}}}function ge(t){let e,s,n,o,u,p,l,r,_,f=t[0],g=[];for(let c=0;c<f.length;c+=1)g[c]=ie(oe(t,f,c));return{c(){e=w("fieldset"),s=w("legend"),n=A("Websocket Settings"),o=T(),u=w("details"),p=w("summary"),l=A("Event-Names"),r=T(),_=w("div");for(let c=0;c<g.length;c+=1)g[c].c();this.h()},l(c){e=E(c,"FIELDSET",{class:!0});var y=V(e);s=E(y,"LEGEND",{class:!0});var d=V(s);n=R(d,"Websocket Settings"),d.forEach(N),o=P(y),u=E(y,"DETAILS",{class:!0});var k=V(u);p=E(k,"SUMMARY",{class:!0});var b=V(p);l=R(b,"Event-Names"),b.forEach(N),r=P(k),_=E(k,"DIV",{class:!0});var $=V(_);for(let a=0;a<g.length;a+=1)g[a].l($);$.forEach(N),k.forEach(N),y.forEach(N),this.h()},h(){i(s,"class","svelte-17qczez"),i(p,"class","svelte-17qczez"),i(_,"class","flex svelte-17qczez"),u.open=!0,i(u,"class","svelte-17qczez"),i(e,"class","grid-item obs svelte-17qczez")},m(c,y){U(c,e,y),m(e,s),m(s,n),m(e,o),m(e,u),m(u,p),m(p,l),m(u,r),m(u,_);for(let d=0;d<g.length;d+=1)g[d].m(_,null)},p(c,[y]){if(y&1){f=c[0];let d;for(d=0;d<f.length;d+=1){const k=oe(c,f,d);g[d]?g[d].p(k,y):(g[d]=ie(k),g[d].c(),g[d].m(_,null))}for(;d<g.length;d+=1)g[d].d(1);g.length=f.length}},i:W,o:W,d(c){c&&N(e),de(g,c)}}}function he(t,e,s){ce(()=>{});function n(o,u){o[u].name=this.value,s(0,le)}return[le,n]}class be extends X{constructor(e){super(),J(this,e,he,ge,Q,{})}}function $e(t){let e,s,n,o,u={};e=new fe({props:u}),t[2](e);let p={};return n=new be({props:p}),t[3](n),{c(){x(e.$$.fragment),s=T(),x(n.$$.fragment)},l(l){ee(e.$$.fragment,l),s=P(l),ee(n.$$.fragment,l)},m(l,r){te(e,l,r),U(l,s,r),te(n,l,r),o=!0},p(l,[r]){const _={};e.$set(_);const f={};n.$set(f)},i(l){o||(se(e.$$.fragment,l),se(n.$$.fragment,l),o=!0)},o(l){ae(e.$$.fragment,l),ae(n.$$.fragment,l),o=!1},d(l){t[2](null),ne(e,l),l&&N(s),t[3](null),ne(n,l)}}}function ve(t,e,s){let n,o;function u(l){F[l?"unshift":"push"](()=>{n=l,s(0,n)})}function p(l){F[l?"unshift":"push"](()=>{o=l,s(1,o)})}return[n,o,u,p]}class we extends X{constructor(e){super(),J(this,e,ve,$e,Q,{})}}export{we as default};
