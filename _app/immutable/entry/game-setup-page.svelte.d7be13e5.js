import{S as ae,i as oe,s as ne,J as fe,k as $,a as V,q as R,l as E,m as N,c as P,r as B,h as v,n as p,b as X,D as l,N as H,O as ke,P as Ie,K as me,L as pe,M as he,g as j,d as x,Q as Se,R as Te,w as ee,T as Ne,y as re,z as ie,H as z,A as ce,U as q,u as $e,V as Ve,B as ue,I as ge,o as Ee,W as Z,E as se,X as Pe}from"../chunks/index.c94d9d39.js";import{a as Oe,o as J}from"../chunks/obs-store.9aeed576.js";const A="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",C="[a-fA-F\\d]{1,4}",te=`
(?:
(?:${C}:){7}(?:${C}|:)|                                   
(?:${C}:){6}(?:${A}|:${C}|:)|                             
(?:${C}:){5}(?::${A}|(?::${C}){1,2}|:)|                   
(?:${C}:){4}(?:(?::${C}){0,1}:${A}|(?::${C}){1,3}|:)| 
(?:${C}:){3}(?:(?::${C}){0,2}:${A}|(?::${C}){1,4}|:)| 
(?:${C}:){2}(?:(?::${C}){0,3}:${A}|(?::${C}){1,5}|:)| 
(?:${C}:){1}(?:(?::${C}){0,4}:${A}|(?::${C}){1,6}|:)| 
(?::(?:(?::${C}){0,5}:${A}|(?::${C}){1,7}|:))            
)(?:%[0-9a-zA-Z]{1,})?|(::d)                                            
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim();var le={isIPAddress(t){return new RegExp(`(?:^${A}$)|(?:^${te}$)`).test(t.toString())},isIPV4Address(t){return new RegExp(`^${A}$`).test(t.toString())},isIPV6Address(t){return new RegExp(`^${te}$`).test(t.toString())},ipVersion(t){return new RegExp(`(?:^${A}$)|(?:^${te}$)`).test(t.toString())?new RegExp(`^${te}$`).test(t.toString())?6:4:"Please enter valid IP address"}};const Le=t=>({}),be=t=>({});function Ce(t){let e,s,a,o,c,d,n,r,h,b,i,_,y;const g=t[3].header,S=fe(g,t,t[2],be),w=t[3].default,f=fe(w,t,t[2],null);return{c(){e=$("dialog"),s=$("div"),S&&S.c(),a=V(),o=$("hr"),c=V(),f&&f.c(),d=V(),n=$("hr"),r=V(),h=$("button"),b=R("close modal"),this.h()},l(u){e=E(u,"DIALOG",{class:!0});var O=N(e);s=E(O,"DIV",{class:!0});var k=N(s);S&&S.l(k),a=P(k),o=E(k,"HR",{}),c=P(k),f&&f.l(k),d=P(k),n=E(k,"HR",{}),r=P(k),h=E(k,"BUTTON",{class:!0});var m=N(h);b=B(m,"close modal"),m.forEach(v),k.forEach(v),O.forEach(v),this.h()},h(){h.autofocus=!0,p(h,"class","svelte-1yh2xbb"),p(s,"class","svelte-1yh2xbb"),p(e,"class","svelte-1yh2xbb")},m(u,O){X(u,e,O),l(e,s),S&&S.m(s,null),l(s,a),l(s,o),l(s,c),f&&f.m(s,null),l(s,d),l(s,n),l(s,r),l(s,h),l(h,b),t[6](e),i=!0,h.focus(),_||(y=[H(h,"click",t[5]),H(s,"click",ke(t[4])),H(e,"close",t[7]),H(e,"click",Ie(t[8]))],_=!0)},p(u,[O]){S&&S.p&&(!i||O&4)&&me(S,g,u,u[2],i?he(g,u[2],O,Le):pe(u[2]),be),f&&f.p&&(!i||O&4)&&me(f,w,u,u[2],i?he(w,u[2],O,null):pe(u[2]),null)},i(u){i||(j(S,u),j(f,u),i=!0)},o(u){x(S,u),x(f,u),i=!1},d(u){u&&v(e),S&&S.d(u),f&&f.d(u),t[6](null),_=!1,Se(y)}}}function Me(t,e,s){let{$$slots:a={},$$scope:o}=e,{showModal:c}=e,d;function n(_){Te.call(this,t,_)}const r=()=>d.close();function h(_){ee[_?"unshift":"push"](()=>{d=_,s(1,d)})}const b=()=>s(0,c=!1),i=()=>d.close();return t.$$set=_=>{"showModal"in _&&s(0,c=_.showModal),"$$scope"in _&&s(2,o=_.$$scope)},t.$$.update=()=>{t.$$.dirty&3&&d&&c&&d.showModal()},[c,d,o,a,n,r,h,b,i]}class De extends ae{constructor(e){super(),oe(this,e,Me,Ce,ne,{showModal:0})}}function Re(t){let e,s,a,o,c,d,n,r,h,b,i,_,y,g,S,w,f,u,O,k,m,M,D,U;return{c(){e=$("ul"),s=$("li"),a=R("Check your connection in OBS > Tab Tools > WebSocket Server Settings"),o=V(),c=$("li"),d=R("The default OBS-WebSocket port is 4455"),n=V(),r=$("li"),h=R("IPv4 and IPv6 addresses are supported"),b=V(),i=$("li"),_=R("Password can be blank (if there is no password set in the WebSocket-Server)"),y=V(),g=$("li"),S=R("Sideline will automatically reconnect on refresh"),w=V(),f=$("li"),u=R("Settings will be saved in the browser (local storage)"),O=V(),k=$("li"),m=R("Make sure you are on the same (lokal) network as your OBS WebSocket-Server"),M=V(),D=$("li"),U=R("Or enable port forwarding in your router"),this.h()},l(W){e=E(W,"UL",{class:!0});var L=N(e);s=E(L,"LI",{});var K=N(s);a=B(K,"Check your connection in OBS > Tab Tools > WebSocket Server Settings"),K.forEach(v),o=P(L),c=E(L,"LI",{});var T=N(c);d=B(T,"The default OBS-WebSocket port is 4455"),T.forEach(v),n=P(L),r=E(L,"LI",{});var I=N(r);h=B(I,"IPv4 and IPv6 addresses are supported"),I.forEach(v),b=P(L),i=E(L,"LI",{});var G=N(i);_=B(G,"Password can be blank (if there is no password set in the WebSocket-Server)"),G.forEach(v),y=P(L),g=E(L,"LI",{});var F=N(g);S=B(F,"Sideline will automatically reconnect on refresh"),F.forEach(v),w=P(L),f=E(L,"LI",{});var Q=N(f);u=B(Q,"Settings will be saved in the browser (local storage)"),Q.forEach(v),O=P(L),k=E(L,"LI",{});var Y=N(k);m=B(Y,"Make sure you are on the same (lokal) network as your OBS WebSocket-Server"),Y.forEach(v),M=P(L),D=E(L,"LI",{});var _e=N(D);U=B(_e,"Or enable port forwarding in your router"),_e.forEach(v),L.forEach(v),this.h()},h(){p(e,"class","svelte-1h0wylw")},m(W,L){X(W,e,L),l(e,s),l(s,a),l(e,o),l(e,c),l(c,d),l(e,n),l(e,r),l(r,h),l(e,b),l(e,i),l(i,_),l(e,y),l(e,g),l(g,S),l(e,w),l(e,f),l(f,u),l(e,O),l(e,k),l(k,m),l(e,M),l(e,D),l(D,U)},p:se,d(W){W&&v(e)}}}function Be(t){let e,s;return{c(){e=$("h2"),s=R("Help"),this.h()},l(a){e=E(a,"H2",{slot:!0,class:!0});var o=N(e);s=B(o,"Help"),o.forEach(v),this.h()},h(){p(e,"slot","header"),p(e,"class","svelte-1h0wylw")},m(a,o){X(a,e,o),l(e,s)},p:se,d(a){a&&v(e)}}}function We(t){let e,s,a,o,c,d,n=t[5]?"Disconnect":"Connect",r,h,b,i,_,y,g,S,w,f,u,O,k,m,M,D,U,W;function L(T){t[9](T)}let K={$$slots:{header:[Be],default:[Re]},$$scope:{ctx:t}};return t[4]!==void 0&&(K.showModal=t[4]),y=new De({props:K}),ee.push(()=>Ne(y,"showModal",L)),{c(){e=$("fieldset"),s=$("legend"),a=R("OBS Settings"),o=V(),c=$("div"),d=$("button"),r=R(n),h=V(),b=$("button"),i=R("?"),_=V(),re(y.$$.fragment),S=V(),w=$("input"),f=V(),u=$("input"),O=V(),k=$("input"),m=V(),M=$("textarea"),this.h()},l(T){e=E(T,"FIELDSET",{class:!0});var I=N(e);s=E(I,"LEGEND",{class:!0});var G=N(s);a=B(G,"OBS Settings"),G.forEach(v),o=P(I),c=E(I,"DIV",{class:!0});var F=N(c);d=E(F,"BUTTON",{class:!0});var Q=N(d);r=B(Q,n),Q.forEach(v),h=P(F),b=E(F,"BUTTON",{class:!0,title:!0});var Y=N(b);i=B(Y,"?"),Y.forEach(v),F.forEach(v),_=P(I),ie(y.$$.fragment,I),S=P(I),w=E(I,"INPUT",{type:!0,placeholder:!0,class:!0,title:!0}),f=P(I),u=E(I,"INPUT",{type:!0,placeholder:!0,class:!0,title:!0}),O=P(I),k=E(I,"INPUT",{type:!0,placeholder:!0,class:!0,title:!0}),m=P(I),M=E(I,"TEXTAREA",{class:!0,spellcheck:!0}),N(M).forEach(v),I.forEach(v),this.h()},h(){p(s,"class","svelte-1h0wylw"),p(d,"class","btn btn-connect svelte-1h0wylw"),z(d,"connected",t[5]),p(b,"class","btn btn-help svelte-1h0wylw"),p(b,"title","Show Help"),p(c,"class","top svelte-1h0wylw"),p(w,"type","text"),p(w,"placeholder","IP"),p(w,"class","input-ip svelte-1h0wylw"),p(w,"title","Websocket Server IP (for OBS it is usually 192.168.X.X)"),z(w,"invalid",!le.isIPAddress(t[1])),p(u,"type","text"),p(u,"placeholder","Port"),p(u,"class","input-port svelte-1h0wylw"),p(u,"title","Port (for OBS it is usually 4455)"),z(u,"invalid",!de(t[0])),p(k,"type","password"),p(k,"placeholder","Password"),p(k,"class","input-password svelte-1h0wylw"),p(k,"title","If required by the OBS Websocket Server (can also be ampty)"),p(M,"class","no-resize svelte-1h0wylw"),p(M,"spellcheck","false"),M.disabled=!0,p(e,"class","grid-item svelte-1h0wylw")},m(T,I){X(T,e,I),l(e,s),l(s,a),l(e,o),l(e,c),l(c,d),l(d,r),l(c,h),l(c,b),l(b,i),l(e,_),ce(y,e,null),l(e,S),l(e,w),q(w,t[1]),l(e,f),l(e,u),q(u,t[0]),l(e,O),l(e,k),q(k,t[2]),l(e,m),l(e,M),t[13](M),D=!0,U||(W=[H(d,"click",t[6]),H(b,"click",t[8]),H(w,"input",t[10]),H(u,"input",t[11]),H(k,"input",t[12])],U=!0)},p(T,[I]){(!D||I&32)&&n!==(n=T[5]?"Disconnect":"Connect")&&$e(r,n),(!D||I&32)&&z(d,"connected",T[5]);const G={};I&262144&&(G.$$scope={dirty:I,ctx:T}),!g&&I&16&&(g=!0,G.showModal=T[4],Ve(()=>g=!1)),y.$set(G),I&2&&w.value!==T[1]&&q(w,T[1]),(!D||I&2)&&z(w,"invalid",!le.isIPAddress(T[1])),I&1&&u.value!==T[0]&&q(u,T[0]),(!D||I&1)&&z(u,"invalid",!de(T[0])),I&4&&k.value!==T[2]&&q(k,T[2])},i(T){D||(j(y.$$.fragment,T),D=!0)},o(T){x(y.$$.fragment,T),D=!1},d(T){T&&v(e),ue(y),t[13](null),U=!1,Se(W)}}}function de(t){const e=Number(t);return!isNaN(e)&&e>0&&e<9999}function Ae(t,e,s){let a,o;ge(t,Oe,m=>s(14,a=m)),ge(t,J,m=>s(5,o=m)),Ee(()=>{s(1,d=localStorage.getItem("obs-ip")||""),s(0,c=localStorage.getItem("obs-port")||""),s(2,n=localStorage.getItem("obs-pw")||""),s(3,r.value=sessionStorage.getItem("obs-status")||"",r),o||y()});let c="",d="",n="",r,h=!1;a.addListener("ConnectionClosed",m=>{Z(J,o=!1,o),i(`ConnectionClosed ${m.code} , ${m.message}`)}),a.addListener("ConnectionError",m=>{Z(J,o=!1,o),i(`ConnectionError ${m.code} , ${m.message}`)});async function b(){!o&&(!le.isIPAddress(d)||!de(c))||(await y(),o&&_())}function i(m){const M=new Date().toLocaleTimeString("de-de",{timeStyle:"medium"});s(3,r.value=`${M} | ${m}
`+r.value,r),sessionStorage.setItem("obs-status",r.value)}function _(){localStorage.setItem("obs-ip",d),localStorage.setItem("obs-port",c),localStorage.setItem("obs-pw",n)}async function y(){if(o)try{await a.disconnect(),Z(J,o=!1,o),i("Disconnected.")}catch(m){i(`Failed to disconnect ${m.code} , ${m.message}`)}else try{let m=d.trim(),M=c.trim(),D=n;le.isIPV6Address(m)&&(m=`[${m}]`);const{obsWebSocketVersion:U,negotiatedRpcVersion:W}=await a.connect(`ws://${m}:${M}`,D,{rpcVersion:1});Z(J,o=!0,o),i(`Connected to the OBS-WebSocket-Server (Version: ${U} RPC: ${W})`)}catch(m){Z(J,o=!1,o),i(`Failed to connect ${m.code} , ${m.message}`)}}async function g(m,M){if(!o){i(`Cannot send data ${m} - not connected!`);return}var D=await a.call("CallVendorRequest",{vendorName:"obs-browser",requestType:"emit_event",requestData:{event_name:m,event_data:M}});return i(`Request: ${m}: ${JSON.stringify(M)}`),i(`Response: ${JSON.stringify(D)}`),D}const S=()=>s(4,h=!0);function w(m){h=m,s(4,h)}function f(){d=this.value,s(1,d)}function u(){c=this.value,s(0,c)}function O(){n=this.value,s(2,n)}function k(m){ee[m?"unshift":"push"](()=>{r=m,s(3,r)})}return[c,d,n,r,h,o,b,g,S,w,f,u,O,k]}class He extends ae{constructor(e){super(),oe(this,e,Ae,We,ne,{obsSendData:7})}get obsSendData(){return this.$$.ctx[7]}}const we=[{name:"sideline_ws_time_min",displayName:"Minutes",description:"",category:"time",defaultValue:"0"},{name:"sideline_ws_time_sec",displayName:"Seconds",description:"",category:"time",defaultValue:"0"},{name:"sideline_ws_time_period",displayName:"Period",description:"",category:"time",defaultValue:"1"},{name:"sideline_ws_time_color",displayName:"Timer Color",description:"",category:"time",defaultValue:"white"},{name:"sideline_ws_score_color",displayName:"Score Color",description:"",category:"score",defaultValue:"white"},{name:"sideline_ws_team_name_home",displayName:"Team Name Home",description:"",category:"team-home",defaultValue:"HOME"},{name:"sideline_ws_team_name_guest",displayName:"Team Name Guest",description:"",category:"team-guest",defaultValue:"GUEST"},{name:"sideline_ws_team_score_home",displayName:"Team Score Home",description:"",category:"team-home",defaultValue:"0"},{name:"sideline_ws_team_score_guest",displayName:"Team Score Guest",description:"",category:"team-guest",defaultValue:"0"},{name:"sideline_ws_team_logo_home",displayName:"Team Logo Home",description:"",category:"team-home",defaultValue:""},{name:"sideline_ws_team_logo_guest",displayName:"Team Logo Guest",description:"",category:"team-guest",defaultValue:""},{name:"sideline_ws_team_textcolor_home",displayName:"Team Text Color Home",description:"",category:"team-home",defaultValue:"black"},{name:"sideline_ws_team_textcolor_guest",displayName:"Team Text Color Guest",description:"",category:"team-guest",defaultValue:"black"},{name:"sideline_ws_team_background_home",displayName:"Team Text Color Home",description:"",category:"team-home",defaultValue:"white"},{name:"sideline_ws_team_background_guest",displayName:"Team Text Color Guest",description:"",category:"team-guest",defaultValue:"white"}];function ve(t,e,s){const a=t.slice();return a[2]=e[s],a[3]=e,a[4]=s,a}function ye(t){let e,s,a,o=t[2].displayName+"",c,d,n,r,h,b,i,_,y,g;function S(){t[1].call(r,t[3],t[4])}return{c(){e=$("fieldset"),s=$("legend"),a=$("label"),c=R(o),n=V(),r=$("input"),_=V(),this.h()},l(w){e=E(w,"FIELDSET",{class:!0});var f=N(e);s=E(f,"LEGEND",{class:!0});var u=N(s);a=E(u,"LABEL",{for:!0,class:!0});var O=N(a);c=B(O,o),O.forEach(v),u.forEach(v),n=P(f),r=E(f,"INPUT",{type:!0,name:!0,placeholder:!0,title:!0,class:!0}),_=P(f),f.forEach(v),this.h()},h(){p(a,"for",d=t[2].name),p(a,"class","svelte-s989oy"),p(s,"class","svelte-s989oy"),p(r,"type","text"),p(r,"name",h=t[2].name),p(r,"placeholder",b=t[2].name),p(r,"title",i=t[2].description),p(r,"class","svelte-s989oy"),p(e,"class"," svelte-s989oy")},m(w,f){X(w,e,f),l(e,s),l(s,a),l(a,c),l(e,n),l(e,r),q(r,t[2].name),l(e,_),y||(g=H(r,"input",S),y=!0)},p(w,f){t=w,f&1&&o!==(o=t[2].displayName+"")&&$e(c,o),f&1&&d!==(d=t[2].name)&&p(a,"for",d),f&1&&h!==(h=t[2].name)&&p(r,"name",h),f&1&&b!==(b=t[2].name)&&p(r,"placeholder",b),f&1&&i!==(i=t[2].description)&&p(r,"title",i),f&1&&r.value!==t[2].name&&q(r,t[2].name)},d(w){w&&v(e),y=!1,g()}}}function Ue(t){let e,s,a,o,c,d,n,r,h,b=t[0],i=[];for(let _=0;_<b.length;_+=1)i[_]=ye(ve(t,b,_));return{c(){e=$("fieldset"),s=$("legend"),a=R("Websocket Settings"),o=V(),c=$("details"),d=$("summary"),n=R("Event-Names"),r=V(),h=$("div");for(let _=0;_<i.length;_+=1)i[_].c();this.h()},l(_){e=E(_,"FIELDSET",{class:!0});var y=N(e);s=E(y,"LEGEND",{class:!0});var g=N(s);a=B(g,"Websocket Settings"),g.forEach(v),o=P(y),c=E(y,"DETAILS",{});var S=N(c);d=E(S,"SUMMARY",{});var w=N(d);n=B(w,"Event-Names"),w.forEach(v),r=P(S),h=E(S,"DIV",{class:!0});var f=N(h);for(let u=0;u<i.length;u+=1)i[u].l(f);f.forEach(v),S.forEach(v),y.forEach(v),this.h()},h(){p(s,"class","svelte-s989oy"),p(h,"class","content"),c.open=!0,p(e,"class","grid-item obs svelte-s989oy")},m(_,y){X(_,e,y),l(e,s),l(s,a),l(e,o),l(e,c),l(c,d),l(d,n),l(c,r),l(c,h);for(let g=0;g<i.length;g+=1)i[g].m(h,null)},p(_,[y]){if(y&1){b=_[0];let g;for(g=0;g<b.length;g+=1){const S=ve(_,b,g);i[g]?i[g].p(S,y):(i[g]=ye(S),i[g].c(),i[g].m(h,null))}for(;g<i.length;g+=1)i[g].d(1);i.length=b.length}},i:se,o:se,d(_){_&&v(e),Pe(i,_)}}}function Ge(t,e,s){Ee(()=>{});function a(o,c){o[c].name=this.value,s(0,we)}return[we,a]}class qe extends ae{constructor(e){super(),oe(this,e,Ge,Ue,ne,{})}}function Fe(t){let e,s,a,o,c={};e=new He({props:c}),t[2](e);let d={};return a=new qe({props:d}),t[3](a),{c(){re(e.$$.fragment),s=V(),re(a.$$.fragment)},l(n){ie(e.$$.fragment,n),s=P(n),ie(a.$$.fragment,n)},m(n,r){ce(e,n,r),X(n,s,r),ce(a,n,r),o=!0},p(n,[r]){const h={};e.$set(h);const b={};a.$set(b)},i(n){o||(j(e.$$.fragment,n),j(a.$$.fragment,n),o=!0)},o(n){x(e.$$.fragment,n),x(a.$$.fragment,n),o=!1},d(n){t[2](null),ue(e,n),n&&v(s),t[3](null),ue(a,n)}}}function Xe(t,e,s){let a,o;function c(n){ee[n?"unshift":"push"](()=>{a=n,s(0,a)})}function d(n){ee[n?"unshift":"push"](()=>{o=n,s(1,o)})}return[a,o,c,d]}class Ke extends ae{constructor(e){super(),oe(this,e,Xe,Fe,ne,{})}}export{Ke as default};
